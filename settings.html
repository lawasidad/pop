<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dashboard - Company & Users</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0; 
    display: flex; 
    height: 100vh; 
    background-color: #f4f6f8;
  }
  nav {
    width: 220px;
    background-color: #2e3a59;
    color: white;
    padding: 20px;
    box-sizing: border-box;
  }
  nav button {
    display: block;
    width: 100%;
    margin-bottom: 12px;
    padding: 12px 8px;
    background-color: #3e4a7e;
    border: none;
    color: white;
    font-size: 16px;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s ease;
  }
  nav button:hover, nav button.active {
    background-color: #1abc9c;
  }
  main {
    flex-grow: 1;
    padding: 30px;
    overflow-y: auto;
  }
  section {
    display: none;
  }
  section.active {
    display: block;
  }
  form {
    max-width: 450px;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  input, select, button {
    width: 100%;
    margin-top: 10px;
    padding: 10px;
    box-sizing: border-box;
    font-size: 15px;
    border-radius: 5px;
    border: 1px solid #ccc;
  }
  button {
    background-color: #1abc9c;
    border: none;
    color: white;
    font-weight: bold;
  }
  button:hover {
    background-color: #16a085;
  }
  h2 {
    margin-top: 0;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 25px;
    background: white;
    border-radius: 8px;
    overflow: hidden;
  }
  th, td {
    padding: 12px 15px;
    border-bottom: 1px solid #ddd;
    text-align: left;
  }
  th {
    background-color: #1abc9c;
    color: white;
  }
</style>
</head>
<body>

<nav>
  <button class="nav-btn active" data-section="users">Users</button>
  <button class="nav-btn" data-section="company">Company</button>
  <button class="nav-btn" data-section="sales">Sales Report</button>
</nav>

<main>
  <!-- Users Section -->
  <section id="users" class="active">
    <h2>Add User</h2>
    <form id="userForm">
      <input type="text" id="userName" placeholder="Name" required />
      <input type="password" id="userPass" placeholder="Password" required />
      <select id="userRole" required>
        <option value="">Select Role</option>
        <option value="Admin">Admin</option>
        <option value="Manager">Manager</option>
        <option value="Sales">Sales</option>
      </select>
      <input type="tel" id="userMobile" placeholder="Mobile Number" pattern="[0-9]{7,15}" required />
      <button type="submit">Add User</button>
    </form>
    <table id="userTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Role</th>
          <th>Mobile</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- Company Section -->
  <section id="company">
    <h2>Company Info</h2>
    <form id="companyForm">
      <input type="text" id="companyName" placeholder="Company Name" required />
      <input type="text" id="companyAddress" placeholder="Address" required />
      <input type="file" id="companyLogo" accept="image/*" />
      <img id="logoPreview" alt="Logo Preview" style="margin-top:10px; max-width:180px; display:none; border-radius: 5px;" />
      <button type="submit">Save Info</button>
    </form>
  </section>

  <!-- Sales Section -->
  <section id="sales">
    <h2>Sales Report</h2>
    <input type="text" id="salesFilter" placeholder="Filter by item name..." />
    <table id="salesTable">
      <thead>
        <tr><th>Item</th><th>Quantity Sold</th><th>Total Price</th></tr>
      </thead>
      <tbody>
        <tr><td>Apple</td><td>20</td><td>$40</td></tr>
        <tr><td>Banana</td><td>15</td><td>$30</td></tr>
        <tr><td>Orange</td><td>10</td><td>$25</td></tr>
        <tr><td>Single Fruit</td><td>8</td><td>$16</td></tr>
      </tbody>
    </table>
  </section>
</main>

<script>
  // Navigation buttons switching sections
  const navButtons = document.querySelectorAll('nav button.nav-btn');
  const sections = document.querySelectorAll('main section');

  navButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      navButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      sections.forEach(sec => sec.classList.remove('active'));
      const targetId = btn.getAttribute('data-section');
      document.getElementById(targetId).classList.add('active');
    });
  });

  // Users management
  const userForm = document.getElementById('userForm');
  const userTableBody = document.querySelector('#userTable tbody');

  function loadUsers() {
    const users = JSON.parse(localStorage.getItem('users') || '[]');
    userTableBody.innerHTML = '';
    users.forEach(user => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${user.name}</td><td>${user.role}</td><td>${user.mobile}</td>`;
      userTableBody.appendChild(tr);
    });
  }
  loadUsers();

  userForm.addEventListener('submit', e => {
    e.preventDefault();
    const name = document.getElementById('userName').value.trim();
    const pass = document.getElementById('userPass').value.trim();
    const role = document.getElementById('userRole').value;
    const mobile = document.getElementById('userMobile').value.trim();

    if (!name || !pass || !role || !mobile) {
      alert('Please fill in all fields.');
      return;
    }

    let users = JSON.parse(localStorage.getItem('users') || '[]');
    if(users.some(u => u.name.toLowerCase() === name.toLowerCase())){
      alert('This user already exists!');
      return;
    }

    users.push({name, pass, role, mobile});
    localStorage.setItem('users', JSON.stringify(users));
    loadUsers();
    userForm.reset();
  });

  // Company management
  const companyForm = document.getElementById('companyForm');
  const logoInput = document.getElementById('companyLogo');
  const logoPreview = document.getElementById('logoPreview');

  logoInput.addEventListener('change', () => {
    const file = logoInput.files[0];
    if (!file) {
      logoPreview.style.display = 'none';
      logoPreview.src = '';
      return;
    }
    const reader = new FileReader();
    reader.onload = e => {
      logoPreview.src = e.target.result;
      logoPreview.style.display = 'block';
    };
    reader.readAsDataURL(file);
  });

  companyForm.addEventListener('submit', e => {
    e.preventDefault();
    const name = document.getElementById('companyName').value.trim();
    const address = document.getElementById('companyAddress').value.trim();
    const logo = logoPreview.src || '';

    if (!name || !address) {
      alert('Company name and address are required.');
      return;
    }

    const company = {name, address, logo};
    localStorage.setItem('company', JSON.stringify(company));
    alert('Company information saved.');
    companyForm.reset();
    logoPreview.style.display = 'none';
    logoPreview.src = '';
  });

  // Filter sales report table
  const salesFilter = document.getElementById('salesFilter');
  const salesTableBody = document.querySelector('#salesTable tbody');

  salesFilter.addEventListener('input', () => {
    const filter = salesFilter.value.toLowerCase();
    Array.from(salesTableBody.querySelectorAll('tr')).forEach(row => {
      const item = row.cells[0].textContent.toLowerCase();
      row.style.display = item.includes(filter) ? '' : 'none';
    });
  });
</script>

</body>
</html>
