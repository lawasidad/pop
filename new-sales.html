function submitSale() {
  const customer = document.getElementById("customer").value.trim();
  if (!customer) {
    alert("Please enter a customer name.");
    return;
  }

  const selectedItems = items.filter(i => i.quantity > 0).map(i => ({
    name: i.name,
    quantity: i.quantity,
    unitPrice: i.unitPrice,
    discount: i.discount,
    total: i.unitPrice * i.quantity * (1 - i.discount / 100)
  }));

  if (selectedItems.length === 0) {
    alert("No products selected.");
    return;
  }

  const total = selectedItems.reduce((sum, i) => sum + i.total, 0);
  const qty = selectedItems.reduce((sum, i) => sum + i.quantity, 0);

  const saleData = {
    customer,
    items: selectedItems,
    total,
    totalQty: qty,
    timestamp: new Date().toISOString()  // ðŸ‘ˆ Ú©Ø§ØªÛŒ Ùˆ Ø¨Û•Ø±ÙˆØ§Ø±ÛŒ Ø¯Ø±ÙˆØ³Øª Ùˆ ØªÛ•ÙˆØ§Ùˆ
  };

  let allSales = JSON.parse(localStorage.getItem("allSales")) || [];
  allSales.push(saleData);
  localStorage.setItem("allSales", JSON.stringify(allSales));

  document.getElementById("customer").value = "";
  document.getElementById("searchBox").value = "";
  items.forEach(i => i.quantity = 0);
  renderProducts();

  alert("Sale submitted! View it on sales.html.");
}
