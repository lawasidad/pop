submitBtn.addEventListener("click", () => {
  const customer = customerInput.value.trim();
  if (!customer) {
    alert("Please enter customer name!");
    return;
  }

  const saleItems = cart.filter(item => item.quantity > 0).map(item => ({
    productName: item.name,
    quantity: item.quantity,
    unitPrice: item.price,
    discountPercent: item.discount,
    total: parseFloat((item.quantity * item.price * (1 - item.discount / 100)).toFixed(2))
  }));

  if (saleItems.length === 0) {
    alert("Please add at least one product quantity!");
    return;
  }

  const saleData = {
    customer,
    items: saleItems,
    totalAmount: parseFloat(saleItems.reduce((sum, item) => sum + item.total, 0).toFixed(2))
  };

  // âœ… Save to localStorage in a flat format
  let existingSales = JSON.parse(localStorage.getItem("salesList")) || [];
  saleItems.forEach(item => {
    existingSales.push({
      customer: customer,
      product: item.productName,
      qty: item.quantity,
      unitPrice: item.unitPrice,
      discount: item.discountPercent,
      total: item.total
    });
  });
  localStorage.setItem("salesList", JSON.stringify(existingSales));

  console.log("=== Sale Data ===");
  console.log(saleData);

  alert("Sale data saved and sent to console. Check developer tools.");

  customerInput.value = "";
  cart = products.map(p => ({ ...p, quantity: 0, discount: 0 }));
  filteredCart = [...cart];
  renderItems();
});
