<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>New Sale Form</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
<div class="container py-4">
  <h2 class="mb-4">Add New Sale</h2>
  <form id="newSaleForm">
    <div class="mb-3">
      <label for="date" class="form-label">Date & Time</label>
      <input type="datetime-local" class="form-control" id="date" required />
    </div>
    <div class="mb-3">
      <label for="trans" class="form-label">Transaction No.</label>
      <input type="text" class="form-control" id="trans" placeholder="Transaction Number" required />
    </div>
    <div class="mb-3">
      <label for="party" class="form-label">Party Name</label>
      <input type="text" class="form-control" id="party" placeholder="Party Name" required />
    </div>
    <div class="mb-3">
      <label for="amount" class="form-label">Amount (IQD)</label>
      <input type="number" class="form-control" id="amount" placeholder="Amount" required min="0" />
    </div>
    <div class="mb-3">
      <label for="due" class="form-label">Due (IQD)</label>
      <input type="number" class="form-control" id="due" placeholder="Due Amount" required min="0" />
    </div>
    <div class="mb-3">
      <label for="status" class="form-label">Status</label>
      <select class="form-select" id="status" required>
        <option value="Due">Due</option>
        <option value="Paid">Paid</option>
      </select>
    </div>
    <div class="mb-3">
      <label for="createdBy" class="form-label">Created By</label>
      <select class="form-select" id="createdBy" required>
        <option value="MANSUR RANYA-R3">MANSUR RANYA-R3</option>
        <option value="SHKAR SLIMANY-S2">SHKAR SLIMANY-S2</option>
        <option value="Zaman A13">Zaman A13</option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary">Submit Sale</button>
  </form>
</div>

<script>
  document.getElementById('newSaleForm').addEventListener('submit', function(e) {
    e.preventDefault();

    // Create sale object from form data
    const sale = {
      date: document.getElementById('date').value,
      trans: document.getElementById('trans').value,
      party: document.getElementById('party').value,
      amount: Number(document.getElementById('amount').value),
      due: Number(document.getElementById('due').value),
      status: document.getElementById('status').value,
      createdBy: document.getElementById('createdBy').value,
    };

    // Get existing sales from localStorage or empty array
    let sales = JSON.parse(localStorage.getItem('salesData') || '[]');

    // Add new sale
    sales.push(sale);

    // Save back to localStorage
    localStorage.setItem('salesData', JSON.stringify(sales));

    // Optional: clear form after submit
    this.reset();

    alert('Sale added successfully! You can now go to Sales page.');
  });
</script>

</body>
</html>
